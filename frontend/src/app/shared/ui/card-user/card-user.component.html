<section class="card"  (mousemove)="onCardMouseMove($event, cardEl)"
    (mouseleave)="onCardMouseLeave(cardEl)" #cardEl>
    <div class="card-header">
        <div class="avatar-section">
            <div class="avatar-wrapper">
                <img [src]="employee.avatarUrl" [alt]="employee.nome" class="avatar">
               
            </div>
            <div class="employee-info">
                <h3 class="employee-name">{{ employee.nome }}</h3>
                <p class="employee-role">{{ employee.cargo }}</p>
                <div class="employee-tags">
                    <span class="tag" *ngFor="let tag of employee.tags">{{ tag }}</span>
                </div>
            </div>
        </div>
        
        <button class="view-details-btn" (click)="viewDetails(employee)">
            <img src="../../../../assets/busca_icon.svg" alt="Detalhes" class="btn-icon">
        </button>
    </div>

    <div class="card-metrics">
        <div class="metric-item">
            <div class="metric-icon-wrapper primary">
                <img src="../../../../assets/clock.svg" alt="Horas" class="metric-icon">
            </div>
            <div class="metric-content">
                <span class="metric-value">{{ employee.totalHours }}h</span>
                <span class="metric-label">Horas Mês</span>
            </div>
        </div>

        <div class="metric-item">
            <div class="metric-icon-wrapper secondary1">
                <img src="../../../../assets/table.svg" alt="Issues" class="metric-icon">
            </div>
            <div class="metric-content">
                <span class="metric-value">{{ employee.totalIssues }}</span>
                <span class="metric-label">Issues</span>
            </div>
        </div>

        <div class="metric-item">
            <div class="metric-icon-wrapper secondary2">
                <img src="../../../../assets/check.svg" alt="Concluídas" class="metric-icon">
            </div>
            <div class="metric-content">
                <span class="metric-value">{{ employee.completedIssues }}</span>
                <span class="metric-label">Concluídas</span>
            </div>
        </div>
    </div>

    <div class="productivity-section">
        <div class="productivity-info">
            <span class="productivity-label">Produtividade do Mês</span>
            <div class="productivity-stats">
                <div class="stat-item">
                    <img src="../../../../assets/check.svg" alt="Concluídas" class="stat-icon">
                    <span class="stat-value">{{ employee.completedIssues }} concluídas</span>
                </div>
                <div class="stat-item">
                    <img src="../../../../assets/clock.svg" alt="Horas" class="stat-icon">
                    <span class="stat-value">{{ employee.totalHours }}h trabalhadas</span>
                </div>
            </div>
        </div>
        <div class="productivity-badge">
            {{ employee.efficiency }}% Performance
        </div>
    </div>

    <!-- Gráfico de atividade recente -->
    <div class="activity-chart">
        <div class="chart-header">
            <span class="chart-title">Atividade Semanal</span>
        </div>
        <div class="mini-chart">
            <div class="chart-bar" *ngFor="let activity of employee.weeklyActivity; let i = index"
                    [style.height.%]="(activity / getMaxActivity(employee.weeklyActivity)) * 100"
                    [class.active]="i === getCurrentDayIndex()">
                <span class="bar-value">{{ activity }}</span>
            </div>
        </div>
    </div>

    <div class="card-footer">
        <div class="projects-section">
            <span class="projects-label">Projetos:</span>
            <div class="projects-tags">
                <span class="project-tag" *ngFor="let project of employee.projects">
                    {{ project }}
                </span>
            </div>
        </div>
        
        <div class="status-badges">
            <span class="badge success" *ngIf="employee.onTimeDeliveries > 0">
                ✓ {{ employee.onTimeDeliveries }} no prazo
            </span>
            <span class="badge warning" *ngIf="employee.lateDeliveries > 0">
                ⚠ {{ employee.lateDeliveries }} atrasadas
            </span>
        </div>
    </div>
</section>